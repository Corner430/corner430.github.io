---
title: 网络是怎样连接的
date: 2023-06-22 22:35:21
tags:
  - 笔记
  - 网络
declare: true
---
1. 已经有了IP地址了，为什么还需要MAC地址呢？<!--more-->
- IP地址和MAC地址在计算机网络中扮演着不同的角色，它们各自具有不同的功能和用途。
- IP地址（Internet Protocol address）是用于在互联网上标识和寻址设备的数字地址。它是逻辑地址，用于在网络层（如Internet协议）上进行路由和通信。IP地址是由网络管理员配置的，并且可以根据需要进行更改。IP地址允许网络中的设备相互识别和进行通信。
- 而MAC地址（Media Access Control address）是一个唯一的硬件地址，用于在**局域网（LAN）**中标识网络设备。MAC地址是由设备的制造商固定在网络接口卡上的，因此在设备出厂时即被分配。它是物理地址，用于在数据链路层上进行数据帧的传输。MAC地址是全球唯一的，每个网络设备都有一个独特的MAC地址。
- 那么为什么需要MAC地址呢？
  1. **局域网通信**：在局域网中，设备之间的通信是基于MAC地址进行的。当设备在同一局域网中进行通信时，它们使用MAC地址来识别彼此并交换数据。路由器根据目标MAC地址将数据包转发到正确的设备。
  2. 广播通信：当设备需要向整个局域网发送广播消息时，它使用广播MAC地址（全为1的地址）。这种广播通信对于局域网中的设备发现、地址解析协议等功能非常重要。
  3. ARP协议：地址解析协议（ARP）用于将IP地址映射到相应的MAC地址。当设备知道目标IP地址时，它使用ARP查询来获取对应的MAC地址，以便将数据包正确地发送到目标设备。

> 总结起来，尽管IP地址在网络层上具有重要作用，但MAC地址在数据链路层上同样至关重要。**IP地址用于路由和全球范围的通信，而MAC地址用于局域网内的设备识别和通信**。两者在不同层次上发挥作用，相互补充，共同构建了计算机网络的功能。

2. 路由表是用于路由器和网络设备的重要组成部分，它用于决定网络数据包的转发路径。路由表中存储了网络的可达目的地以及相应的下一跳信息。下面是关于路由表的基本解释：
  1. 目的地网络（Destination Network）：这是指数据包要传输到的目标网络的网络地址。**它可以用IP地址表示，通常是网络的网络号和子网掩码的组合**。
  2. 子网掩码（Subnet Mask）：子网掩码与IP地址结合使用，**用于确定目的地网络的范围。子网掩码中的1位表示网络号，0位表示主机号**。
  3. 下一跳（Next Hop）：下一跳是指将数据包从当前设备转发到目标网络所使用的下一个路由器或网络设备的地址。它可以是直接连接的邻居路由器的IP地址，也可以是下一个中转节点的IP地址。
  4. 接口（Interface）：接口是指路由器或网络设备与相应网络之间的物理或逻辑连接。接口可以是网卡、以太网端口、无线接口等。
在路由表中，每个条目通常包含以上信息。当路由器接收到一个数据包时，它会检查目标IP地址，并使用路由表来确定下一步的操作：
  1. 匹配目的地网络：路由器会检查目的地IP地址和路由表中的目的地网络条目进行匹配。
  2. 最长前缀匹配：如果存在多个匹配的目的地网络，路由器将选择具有最长前缀匹配（即子网掩码最长）的路由表条目。这确保了更精确的匹配。
  3. 下一跳确定：路由器根据匹配的路由表条目找到相应的下一跳地址。
  4. 数据包转发：路由器将数据包发送到相应的下一跳地址，或通过适当的接口将数据包转发到目标网络。
路由表的内容可以通过手动配置静态路由，也可以通过动态路由协议（如OSPF、BGP等）自动学习和更新。动态路由协议允许路由器在网络发生变化时自动更新路由表，以确保有效的数据包转发。
通过有效管理和更新路由表，路由器能够根据目标网络选择最佳路径来转发数据包，实现网络中的数据传输和通信。

3. **TTL 是 "Time to Live"（生存时间）的缩写**，它是一个在计算机网络中使用的术语。**TTL 值用于确定数据包在网络中可以存活的时间长度**。当一个数据包被发送到网络上时，它会被赋予一个初始的 TTL 值。每当数据包经过一个路由器或网络设备时，TTL 值就会减少。**当 TTL 值减至零时，数据包将被丢弃并不再继续传输**。
**TTL 值的目的是防止数据包在网络中无限循环**。如果一个数据包在网络中被路由器无限转发，它将消耗网络资源并导致网络拥堵。通过限制数据包的生存时间，TTL 值确保数据包能够在合理的时间内到达目的地或被丢弃。
在实际应用中，TTL 值通常以**秒**为单位表示，常见的初始 TTL 值为 64 或 128。不同的操作系统或网络设备可能对 TTL 值的处理方式有所差异，但一般情况下，每个路由器或网络设备在转发数据包时会将 TTL 值**减少一定的数量，通常是 1 或更多**。
> 总结来说，TTL 是一个用于确定数据包在网络中存活时间的字段，它对网络的稳定运行和防止数据包无限循环起着重要作用。

4. **MTU 是 "Maximum Transmission Unit"（最大传输单元）的缩写。它指的是在计算机网络中可以通过单个数据包传输的最大数据量**。

最大传输单元 (MTU) 是网络通信中一个重要的参数，它定义了网络中可以传输的数据包的最大大小。MTU 的大小是由网络设备或协议规范决定的，通常以字节为单位表示。

当数据需要通过网络传输时，它会被分割成更小的数据包以适应网络的 MTU。这样做的目的是确保数据包能够在网络中正确地传输，因为某些网络设备或链路可能有传输数据包大小的限制。如果数据包的大小超过某个设备或链路的 MTU，它将被分割成更小的片段进行传输，并在目标节点上重新组装。

不同类型的网络（如以太网、Wi-Fi、以及各种广域网连接等）通常具有不同的 MTU 值。常见的以太网 MTU 值是 1500 字节，而在某些特殊情况下，如在 VPN 或某些广域网连接中，MTU 可能会被调整为更小的值，例如 1400 字节或更低。

准确设置正确的 MTU 值对于网络性能和数据传输的可靠性至关重要。如果 MTU 值设置得过大，可能会导致数据包被丢弃或需要进行片段重组，从而增加网络延迟和传输错误的可能性。如果 MTU 值设置得过小，数据传输的效率可能会受到影响，因为需要发送更多的数据包来传输相同的数据量。

> 总结来说，MTU 是指在计算机网络中单个数据包可以传输的最大数据量。通过分割数据以适应网络的 MTU，确保数据能够在网络中正确传输，并在目标节点上重新组装。正确设置合适的 MTU 值对于网络性能和数据传输的可靠性非常重要。

5. **MSS 是 "Maximum Segment Size"（最大报文段长度）的缩写**，它是在 TCP/IP 网络通信中使用的一个参数。

在 TCP/IP 协议中，数据被分割成称为报文段（Segment）的小块进行传输。**MSS 指的是在 TCP 报文段中可以承载的最大有效载荷数据的大小，不包括 TCP 报文段的首部信息**。

MSS 的大小是由网络设备或操作系统配置决定的，通常以字节为单位表示。它表示在 TCP 连接中发送的数据报文段的最大大小，因为 TCP 报文段除了有效载荷数据外还包含一些必要的控制信息，如首部、校验和、序列号等。

当建立 TCP 连接时，通信双方会通过握手过程协商一个适当的 MSS 值。这个值会根据网络设备和连接双方的能力而确定，以确保数据的可靠传输和最大效率。较小的 MSS 值可以减少分段和重组的需求，从而提高传输效率。**然而，MSS 值不能超过网络链路中任何一方的 MTU 值，以确保数据包不会被分段**。

MSS 的值通常与网络的 MTU 值相关。实际上，MSS 一般会设为 MTU 值减去 TCP/IP 报文段首部的长度（通常为 40 字节）再减去可能的 IP 选项的长度。

> 总结来说，MSS（最大报文段长度）是在 TCP/IP 网络通信中用于确定 TCP 报文段中有效载荷数据的最大大小的参数。MSS 的值由网络设备或操作系统配置决定，并通过握手过程协商确定。它与网络的 MTU 值相关，用于确保数据的可靠传输和最大效率。

6. TCP（Transmission Control Protocol）和 UDP（User Datagram Protocol）是两种常见的传输层协议，用于在计算机网络上提供可靠的数据传输。

**TCP 是一种面向连接的协议**，它提供了可靠的数据传输和错误检测机制。它通过建立一个连接，在发送和接收数据之间创建一个可靠的通信通道。TCP 使用序列号和确认机制来确保数据的有序传输和可靠接收。它还提供了拥塞控制和流量控制机制，以适应网络拥塞和保证通信的质量。**TCP 的特点是稳定可靠**，适用于对数据传输的完整性和顺序性要求较高的应用，如网页浏览、文件传输、电子邮件等。

**UDP 是一种无连接的协议**，它提供了一种简单的数据传输机制，**不具备可靠性保证**。UDP 通过将数据打包成数据报文并发送，但不进行连接的建立和维护。它没有序列号、确认、重传等机制，因此传输过程中可能会发生丢包或乱序。**UDP 的优点是传输速度快，延迟低，并且没有拥塞控制等复杂的机制**。UDP 适用于对实时性要求较高的应用，如音频、视频流媒体、在线游戏等，因为它更注重传输速度而不是数据的可靠性。

> 总结来说，TCP 是一种面向连接的、可靠的传输协议，适用于对数据传输的完整性和顺序性要求较高的应用；而 UDP 是一种无连接的、不可靠的传输协议，适用于对实时性要求较高的应用。选择使用 TCP 还是 UDP 取决于具体应用的需求，如数据传输的可靠性、延迟要求以及对网络资源的消耗等因素。

> 但这样并不会引发什么问题，因此出错时就收不到来自对方的回复，应用程序会注意到这个问题，并重新发送一遍数据。怎样的操作本身并不复杂，也并不会增加应用程序的负担。
> 在无需重发数据，或者是重发了也没什么意义的情况下，使用UDP发送数据的效率会更高。

7. 双绞线的设计是为了抑制噪声的影响
8. 交换机的设计是将网络包原样转发到目的地
9. 交换机的每一个网线接口后面都是一块网卡。网线接口和后面的电路部分加在一起称为一个端口，也就是说交换机的一个端口就相当于计算机上的一块网卡。换句话说，如果计算机上安装多块网卡，并开启“混杂模式”让网卡接收所有的网络包，然后再安装一个和交换机具备同样功能的网络包转发软件，那么这台计算机就变成了一台交换机。
10. 交换机端口的MAC模块不具有MAC地址
11. 交换机根据MAC地址表查找MAC地址，然后将信号发送到相应的端口
12. 如果接收方MAC地址是一个**广播地址**，那么交换机会将包发送到除源端口之外的所有端口。
13. 广播地址（broadcast address）是一种特殊的地址，将广播地址设为接收方地址时，包会发送到网络中所有的设备。MAC地址中的FF:FF:FF:FF:FF:FF和IP地址中的255.255.255.255都是广播地址
14. 交换机的全双工模式可以同时发送和接收信号
15. 交换机可以同时转发多个包
16. 路由器是基于IP设计的，而交换机是基于以太网设计的
17. 路由器的各个端口都具有MAC地址和IP地址
18. 路由器根据“IP地址”判断转发目标。路由器会忽略主机号，只匹配网络号
19. 路由器的子网掩码列只表示在匹配网络包目标地址时需要对比的比特数量，**匹配的比特数越长优先级越高（最长匹配原则）**
20. 路由器的端口都具有MAC地址，只接收与自身地址匹配的包，遇到不匹配的包则直接丢弃
21. 子网掩码0.0.0.0的意思是网络包接收方IP地址和路由表目标地址的匹配中需要匹配的比特数为0，换句话说，就是根本不需要匹配。只要将子网掩码设置为0.0.0.0，那么无论任何地址都能匹配到这一条记录。也就是说**路由表中子网掩码为0.0.0.0的记录表示“默认路由”，这一行配置的网关地址被称为默认网关**
22. 路由器判断下一个转发目标的方法如下：
  - 如果路由表的网关列内容为IP地址，则该地址就是下一个转发目标
  - 如果路由表的**网关列内容为空**，则IP头部中的接收方IP地址就是下一个转发目标
23. IP（路由器）负责将包送达通信对象这一整体过程，而其中将包传输到下一个路由器的过程则是由以太网（交换机）来负责的
24. 在内网中可用作私有地址的范围仅限一下这些：
```bash
10.0.0.0 ~ 10.255.255.255
172.16.0.0 ~ 172.31.255.255
192.168.0.0 ~ 192.168.255.255
```
> 在制作私有地址规则时，这些地址属于公有地址中还没有被分配的范围
25. 地址转换的基本原理是在转发网络包时对IP头部中的**IP地址和端口号**进行改写，这里的端口号指的是TCP和UDP的端口号，不是路由器和集线器连接网线的那个端口。在对外只能使用一个共有地址的情况下，可以用不同的端口号来区别内网中的不同终端
26. 具备地址转换功能的设备不仅有路由器，有些防火墙也有地址转换功能，它的工作方式和路由器是相同的。
27. 早期的地址转换机制是只改写地址，不改写端口号
28. 对于从公司内网访问互联网的包，即便其发送方私有地址和端口号没有保存在对应表中**也是可以正常转发的**；然而，对于从互联网访问公司内网的包，如果在对应表中没有记录就**无法正常转发**。也就是说，除非公司主动允许，否则是无法从互联网向公司内网发送网络包的。这种机制具有**防止非法入侵**的效果。
29. **包过滤**也是路由器的一个重要附加功能。包过滤就是在对包进行转发时，根据MAC头部、IP头部、TCP头部的内容，按照事先设置好的规则决定是转发这个包，还是丢弃这个包。我们通常说的**防火墙设备或软件**，大多数都是利用这一机制来防止非法入侵的。
30. hub: central part of a wheel from which the spokes radiate 轮毂。集线器（repeater hub）、交换机（switching hub）
31. ADSL（Asymmetric Digital Subscriber Line，非对称数字用户线路）是一种用于传输数据的通信技术。它是一种通过普通电话线提供高速互联网接入的技术。
  - ADSL是"非对称"的，意味着它在上传和下载数据时的速度不对称。一般情况下，ADSL提供的下载速度比上传速度要快。这种设计是为了适应大多数用户在互联网使用过程中更多地下载数据（如浏览网页、观看视频等）而上传较少数据（如发送电子邮件、上传文件等）的需求。
  - ADSL利用了普通电话线的传输能力，通过将数据转换成数字信号进行传输。它利用了电话线中未使用的频率范围，将低频范围用于传输电话信号，高频范围用于传输数据信号。这样就可以同时进行电话通话和上网，而且不会相互干扰。
  - ADSL的传输速度依赖于多个因素，包括电话线的质量、距离和网络供应商的服务等。通常，ADSL的下载速度可以达到几兆比特每秒（Mbps），而上传速度通常较慢，一般在数百千位每秒（Kbps）到几兆位每秒（Mbps）之间。
  - **总而言之，ADSL是一种通过普通电话线提供高速互联网接入的通信技术，它提供的下载速度比上传速度更快，适用于多数用户更多地下载数据而上传较少数据的需求。**
32. **电信号和光信号传播的速度大体上相同，之所以电缆不如光纤通信速率高，是因为电信号再提升通信速率的同时，其衰减率也会提高（信号在传播过程中减弱），导致信号无法传到目的地**。相对地，光信号本来的衰减率就很低，提高通信速率也并不会提高衰减率。此外，光纤还不受电磁噪声的影响， 因此光纤能够进行高速通信。
33. **接入网（Access Network）是指将终端用户连接到互联网或其他公共通信网络的部分网络**。它是整个通信网络中的最后一段，提供用户与网络之间的物理和逻辑接口。
  - 接入网的主要功能是将用户设备（如计算机、手机、智能电视等）与核心网络进行连接，使用户能够访问互联网和其他网络服务。它扮演着桥梁的角色，将用户的数据传输到全球范围的网络中。
  - 接入网可以采用各种不同的技术和架构，具体取决于网络运营商和地理条件。以下是几种常见的接入网技术：
    - 数字用户线路（Digital Subscriber Line，DSL）：利用普通电话线传输数据，常见的形式包括ADSL和VDSL。
    - 光纤接入网（Fiber to the x，FTTx）：使用光纤传输数据到用户的位置。其中，FTTH（Fiber to the Home）将光纤延伸到用户住宅，而FTTC（Fiber to the Curb）和FTTB（Fiber to the Building）将光纤延伸到街边或建筑物。
    - 有线电视网络：利用有线电视网络传输数据，用户可以通过电缆调制解调器（Cable Modem）访问互联网。
    - 无线接入网：使用无线技术（如Wi-Fi、4G、5G等）将用户设备连接到网络。
  - 接入网的设计和性能对于用户的上网体验和网络服务的可用性至关重要。它需要考虑带宽、延迟、可靠性和安全性等因素，以满足用户对高速、稳定和安全的互联网连接的需求。
34. 双绞线的极限距离是100米，但光纤的连接距离可以长达几公里。**距离的不同和路由的维护方式**，就是互联网与家庭、公司网络之间最主要的两个不同点
35. 互联网接入路由器会在网络包前面加上MAC头部、PPPoE头部、PPP头部总共3种头部，然后发送给ADSL Modem（PPPoE方式下）
36. **BAS: Broadband Access Server，宽带接入服务器**。它也是一种路由器
  - BAS（Broadband Access Server）是一种网络设备，**用于提供宽带接入服务**。它是一种位于网络服务提供商（ISP）或通信运营商网络中的关键设备，用于管理和控制用户的宽带接入。
  - BAS的主要功能是对接入网络的用户进行认证、授权和计费，以确保用户能够安全地接入和使用网络服务。它充当用户和网络服务提供商之间的接口，负责处理用户的接入请求、分配IP地址、设置访问权限以及监控用户的网络连接。
  - BAS通常支持多种接入技术，如数字用户线路（DSL）、光纤、电缆、无线等，以适应不同用户的接入需求。它可以与不同类型的接入设备（如调制解调器、光猫等）进行交互，以建立用户与网络之间的连接。
  - 除了用户管理和连接控制功能，**BAS还可以提供其他服务，如网络地址转换（NAT）、虚拟专用网络（VPN）等**。它还能够收集用户的接入统计数据，生成报告和日志，用于网络管理和故障排除。
  - 需要注意的是，BAS在不同的网络环境和服务提供商之间可能有不同的名称和实现方式。例如，有些地方将BAS称为宽带接入服务器（Broadband Access Server），或称之为宽带终端接入设备（Broadband Termination Equipment，BTE）。
  - **总而言之，BAS是一种用于管理和控制宽带接入服务的网络设备，它负责对用户进行认证、授权和计费，并提供用户接入管理和连接控制功能。它在网络服务提供商和通信运营商的基础设施中发挥着重要作用**。
37. **PPP: Point-to-Point Protocol，点到点协议**。它是电话线、ISDN等通信线路所使用的一种协议，集成了用户认证、配置下发、数据压缩、加密等各种功能。
38. **ATM: Asynchronous Transfer Mode，异步传输**。它是在以电话线为载体的传统电话技术基础上扩展出来的一种通信方式。它的数据传输是以“信元”为单位来进行的，这和以包为单位传输数据的TCP/IP很像，但这种方式并不适用于计算机通信。
39. **调制（Modulation）是指在通信中将要传输的信息信号转换成适合在传输介质中传播的信号形式的过程**。它是通过改变载波信号的某些特性，如振幅、频率或相位来实现的。
  - 在调制过程中，原始的信息信号称为**基带信号（Baseband Signal），而要传输的信号称为调制信号（Modulated Signal）**。调制的主要目的是将基带信号转换为适合在传输介质（如电缆、光纤、空气等）中传播的信号。
  - 调制技术的选择取决于传输介质的特性以及通信系统的要求。以下是几种常见的调制技术：
    - 振幅调制（Amplitude Modulation，AM）：在振幅调制中，基带信号的振幅被调制到一个高频载波信号上。调制后的信号的振幅随着基带信号的变化而变化。
    - 频率调制（Frequency Modulation，FM）：在频率调制中，基带信号的频率被调制到一个高频载波信号上。调制后的信号的频率随着基带信号的变化而变化。
    - 相位调制（Phase Modulation，PM）：在相位调制中，基带信号的相位被调制到一个高频载波信号上。调制后的信号的相位随着基带信号的变化而变化。
  - 此外，还有许多其他的调制技术和变种，如正交频分多路复用（Orthogonal Frequency Division Multiplexing，OFDM）、相干调制（Coherent Modulation）等，它们在不同的通信系统和应用中发挥着重要的作用。
  - 调制技术的选择和优化需要考虑传输介质的特性、噪声环境、带宽效率、功耗以及接收端的解调能力等因素，以实现高效、可靠的数据传输和通信。
40. 光纤分为单模和多模两种，根据其物理特性，各有利弊
41. 上下行的光信号在光纤中混合在一起，信号会变得无法识别，因此我们需要对他们进行区分，**办法是上行和下行信号采用不同波长的光**。波长不同的光混合后可通过**棱镜原理**进行分离，因此光纤中的上行和下行信号即便混合起来也可以识别。像这样在一条光纤中使用不同的波长传输多个光信号的方式叫做**波分复用**
42. ONU: Optical Network Unit，光网络单元。它和光纤收发器一样，可以将电信号转换成光信号，除此之外还具有和电话局的OLT（Optical Line Terminal，光线路终端）相互配合避免信号碰撞的功能。这个设备有时也被叫做终端盒，因此终端盒这个词本身是对光纤收发器和ONU等光纤终端设备的统称
43. PPPoE: Point-to-Point Protocol over Ethernet，以太网的点对点协议
44. 在使用电话线或者ISDN**拨号上网时，PPP是这样工作的**。首先，用户向运营商的接入点拨打电话，电话接通后输入用户名和密码进行登录操作。用户名和密码通过RADIUS协议从RAS发送到认证服务器，认证服务器校验这些信息是否正确。当确认无误后，认证服务器会返回IP地址等配置信息，并将这些信息下发给用户。用户的计算机根据这些配置IP地址等参数，完成TCP/IP收发网络包的准备工作，接下来就可以发送TCP/IP包了
45. **PPPoE是将PPP消息装入以太网包进行传输的方式**
46. 所谓**隧道，就是能将包原封不动搬运到另一端**
47. 一对一连接的端口可以不分配IP地址，这种方式称为无编号
48. PPPoA: Point-to-Point Protocol over ATM. PPPoA方式不添加MAC头部和PPPoE头部，而是直接将包装入信元中
49. **POP（Point of Presence）和NOC（Network Operations Center）**是与网络和通信基础设施相关的术语。
  1. POP（Point of Presence，中文一般叫做“接入点”）：
    - **POP指的是在网络服务提供商（ISP）或通信运营商网络中的一个点，通常是物理位置或网络节点**。它是用户与ISP网络连接的地点，提供网络接入、路由和交换等服务。POP通常位于地理上的关键位置，以便为用户提供更好的网络接入服务和更低的延迟。
    - 在一个ISP网络中，可能会有多个POP分布在不同的地理位置，每个POP通常包含路由器、交换机、服务器等网络设备，用于连接用户和核心网络。通过建立多个POP，ISP可以提供更广泛的覆盖范围，并提高网络的可靠性和性能。
  2. NOC（Network Operations Center）：
    - **NOC是一个专门的中心或部门，负责监控、管理和维护一个网络的运行**。NOC通常由一组网络工程师和技术人员组成，他们负责确保网络的正常运行，并快速响应和解决任何网络问题或故障。
    - NOC的主要职责包括实时监控网络设备和链路的状态、处理网络事件和故障、进行网络配置和优化、执行维护计划、协调与其他运营商的互联等。NOC通常使用监控系统、网络管理工具和报警系统等来帮助监控和管理网络。
    - NOC还负责与其他相关部门或合作伙伴进行沟通和协调，如与运营商、互联网服务提供商、数据中心等。通过及时响应和解决网络问题，NOC确保网络的稳定性、可靠性和性能，以提供良好的网络服务体验。
> 总结起来，POP是网络服务提供商或通信运营商网络中用户连接的点，提供网络接入和服务，而NOC是负责监控、管理和维护网络运行的中心或部门。它们在网络基础设施中扮演着重要的角色，保证了网络的可用性和性能。可以简单地认为，NOC就是规模扩大后的POP
50. **专线是固定连接线路**，不需要进行身份认证，参数是根据传真、书面等方式下发后进行手动配置的，因此也不需要PPP、DHCP等机制。其实，这就是最古老的互联网接入方式。
51. BGP: Border Gateway Protocol, 边界网关协议.互联网内部使用BGP机制在运营商之间交换路由信息
52. IX: Internet eXchange, 中文一般叫做“互联网交换中心”。设置一个中心设备，通过连接到中心设备的方式来减少线路数量，这个中心设备就称为IX。
53. **防火墙不会检查通信数据的具体内容，因此无法抵御隐藏在通信数据内容中的攻击。**
54. **防火墙：一种抵御外部网络攻击的机制，也是最早出现的一种防御机制**。现在已经出现了很多可以绕过防火墙的攻击方法，因此防火墙一般需要和反病毒、非法入侵检测、访问隔离等机制并用。
55. 包过滤方式的防火墙不仅可以允许或者阻止网络包的通过，还具备地址转换功能，因此还需要进行相关的设置。
56. 包过滤方式的防火墙可根据接收方IP地址、发送方IP地址、接收方端口号、发送方端口号、控制位等信息来判断是否允许某个包通过
57. 防火墙无法抵御的攻击：防火墙可以根据包的起点和终点来判断是否允许其通过，但仅凭起点和终点并不能筛选出所有风险的包。比如，假设Web服务器在收到含有特定数据的包时会引起宕机。但是防火墙只关心包的起点和终点，因此即便包中含有特定数据，防火墙也无法发现，于是包就被放行了。然后，当包到达Web服务器时，就会引发服务器宕机。通过这个例子可以看出，**只有检查包的内容才能识别这种风险，因此防火墙对这种情况无能为力**
58. **DNS服务器可以为一个域名填写多个IP地址，并通过轮询（Round Robin）方式实现负载均衡和故障容错**。下面是一种常见的做法：
  1. 在DNS服务器上为域名配置多个A记录：A记录是用来指定域名对应的IP地址的记录类型。在DNS服务器上为域名配置多个A记录，每个A记录对应一个IP地址。例如：
```css
example.com. IN A 192.168.1.100
example.com. IN A 192.168.1.101
example.com. IN A 192.168.1.102
```
  2. DNS服务器返回多个IP地址：**当DNS服务器接收到客户端的查询请求时，它会从配置的多个A记录中选择一个IP地址返回给客户端**。可以采用简单的轮询方式，每次返回下一个IP地址。例如，第一次返回192.168.1.100，第二次返回192.168.1.101，以此类推。
  3. 客户端使用返回的IP地址：客户端收到DNS服务器返回的IP地址后，可以使用该IP地址与目标服务器建立连接。通过轮询方式，不同的客户端可能会获得不同的IP地址，从而分散负载到多个服务器上。
**这种配置方式可以实现简单的负载均衡效果，将流量分散到多个服务器上，减轻单个服务器的负载压力。同时，如果其中一个服务器不可用，DNS服务器将不再返回该服务器的IP地址，从而实现故障容错。**
需要注意的是，这种简单的轮询方式并不能完全保证负载均衡，因为DNS服务器无法感知服务器的实际负载情况。在实际应用中，可能需要结合其他负载均衡技术和算法，如权重设置、健康检查等，以达到更精确的负载均衡效果。
59. 使用负载均衡器时，**要用负载均衡器的IP地址代替Web服务器的实际地址注册到DNS服务器上**
60. 对HTTP规格进行扩展，**在HTTP头部字段中加上用来判断相关性的信息，这种信息俗称Cookie**。这样，负载均衡器就可以通过这些信息来作出判断，将一系列相关的请求发送到同一台Web服务器，对于不相关的请求则发送到负载较低的服务器了。
61. **代理：一种介于客户端和Web服务器之间，对访问操作进行中转的机制**。代理（Proxy）本来的意思并不是“转发”消息。而是先把消息收下来，然后“伪装”成原始客户端向Web服务器发出访问请求。
62. 缓存服务器是一台通过代理机制对数据进行缓存的服务器。
63. **缓存服务器和负载均衡器一样，需要代替Web服务器被注册到DNS服务器中**。
64. **将缓存服务器的代理机制放在客户端一侧，就是代理的原型，也就是现在所说的正向代理（forward proxy）**.正向代理除了缓存这一作用，还有一个作用就是用来实现防火墙。**代理在转发过程中可以查看请求的内容，所以可以根据内容判断是否允许访问**。
65. **为解决正向代理的种种弊端，产生了正向代理的改良版---反向代理（reverse proxy）。服务器端的缓存服务器采用的正是这种方式，这种方式称为反向代理。**
66. 缓存服务器判断转发目标的方法还有一种，俺就是查看请求消息的包头部。因为包的IP头部中包含接收方IP地址，只要知道了这个地址，就知道用户要访问哪台服务器了。这种方法称为**透明代理（transparent proxy）**.透明代理集合了正向代理和反向代理的优点。使用透明代理时，**用户不会察觉到代理的存在，也不会注意到HTTP消息是如何被转发的，因此大家更倾向于将透明代理说成是缓存**.最近有很多场合中已经将透明代理直接叫做“缓存”而不是“代理”了。
67. 缓存服务器部署在服务器端还是客户端，其效果是又差别的。
  - 当缓存服务器放在服务器端时，可以减轻Web服务器的负载，但无法减少互联网中的流量。
  - 当缓存服务器部署在客户端时，可以减少流量， 但是Web服务器运营商无法管理缓存服务器。
> 因此，这两种部署缓存服务器的方式各有利弊，但也有一种方式能够集合两者的有点。那就是Web服务器运营者和网络运营商签约，将可以自己控制的缓存服务器放在客户端的运营商处
68. 即便减少了数量，作为一个Web服务器运营者，如果自己和这些运营商签约并部署缓存服务器，无论是费用还是精力都是吃不消的。为了解决这个问题，一些专门从事相关服务的厂商出现了，他们来部署缓存服务器，并租借给Web服务器运营者。这种服务称为**内容分发服务**
69. 内容分发服务也叫CDS（Content Delivery Service）。（现在更常用的名称叫CDN（Content Delivery Network 或 Content Distribution Network））
  内容分发服务（Content Delivery Service，CDS），也称为内容分发网络（Content Delivery Network，CDN），是一种用于提供高效、可靠的内容分发和传输的网络架构。
  CDN的主要目标是将内容（如网页、图片、视频、文件等）快速、可靠地传送给用户，以提供更好的用户体验和性能优化。**它通过在全球分布的边缘服务器上缓存和分发内容，使用户可以从离其较近的服务器获取内容**，从而减少了传输延迟和网络拥塞问题。
  下面是CDN的工作原理：
    1. 内容缓存和分发：CDN在全球各地设置了多个边缘服务器节点，这些节点分布在不同的地理位置，覆盖范围广。原始内容提供商（如网站、媒体服务提供商等）将内容上传到CDN的服务器上，这些服务器上的存储称为缓存。
    2. 请求路由：当用户请求访问特定内容时，请求将被路由到距离用户最近的CDN节点，而不是原始服务器。这个选择过程通常基于网络拓扑、地理位置、负载情况等因素。
    3. 缓存命中：如果请求的内容已经存在于CDN节点的缓存中，CDN节点将立即响应请求并将内容传输给用户。这样可以大大减少从原始服务器获取内容的时间和网络延迟。
    4. 内容更新和失效：CDN节点定期从原始服务器获取最新的内容更新。当内容发生更改或失效时，CDN节点将刷新缓存，并在下一次请求时从原始服务器获取更新后的内容。
    5. 负载均衡和故障容错：CDN通过在多个节点上分发请求，实现负载均衡，使得流量能够均匀分布到不同的服务器上。如果某个节点发生故障或不可用，其他节点可以接管请求，保证服务的连续性。
  通过使用CDN，内容提供商可以提供更快速、可靠的内容访问体验，减少网络拥塞和延迟，并减轻源服务器的负载压力。同时，CDN还提供了许多其他功能，如安全性增强、缓存控制、带宽优化、动态内容加速等。
  需要注意的是，尽管现在更常用的术语是CDN（Content Delivery Network），但CDS（Content Delivery Service）也可以用来指代相同的概念和技术。
70. **缓存内容的更新方法会影响缓存服务器的效率**，要改善这一点，有一种方法是**让Web服务器在原始数据发生更新时，立即通知缓存服务器**，使得缓存服务器上的数据一直保持最新状态
71. 多任务：操作系统提供的一种功能，可以让多个任务（程序）同时运行。实际上，一个处理器在某一个瞬间只能运行一个任务，但通过短时间内在不同的任务间切换，看起来就好像是同时运行多个任务一样。有些操作系统称之为“多进程”
72. **多任务和多线程的区别在于任务和线程的区别**。在操作系统内部，任务是作为单独的程序来对待的，而线程则是一个程序中的一部分。
73. 协议栈的IP模块会检查IP头部
  - 判断是不是发给自己的
  - 判断网络包是否经过分片
  - 将包转交给TCP模块或UDP模块
